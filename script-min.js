var LZString=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var r=s._compress(e,6,(function(e){return t.charAt(e)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,(function(r){return o(t,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":s._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=s.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var a=t.charCodeAt(n);r[2*n]=a>>>8,r[2*n+1]=a%256}return r},decompressFromUint8Array:function(t){if(null==t)return s.decompress(t);for(var r=new Array(t.length/2),n=0,o=r.length;n<o;n++)r[n]=256*t[2*n]+t[2*n+1];var a=[];return r.forEach((function(t){a.push(e(t))})),s.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,(function(t){return o(r,e.charAt(t))})))},compress:function(t){return s._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,r){if(null==e)return"";var n,o,s,a={},i={},u="",c="",l="",p=2,d=3,h=2,f=[],m=0,g=0;for(s=0;s<e.length;s+=1)if(u=e.charAt(s),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=d++,i[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(i,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)m<<=1,g==t-1?(g=0,f.push(r(m)),m=0):g++;for(o=l.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1}else{for(o=1,n=0;n<h;n++)m=m<<1|o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete i[l]}else for(o=a[l],n=0;n<h;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1;0==--p&&(p=Math.pow(2,h),h++),a[c]=d++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(i,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)m<<=1,g==t-1?(g=0,f.push(r(m)),m=0):g++;for(o=l.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1}else{for(o=1,n=0;n<h;n++)m=m<<1|o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete i[l]}else for(o=a[l],n=0;n<h;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1;0==--p&&(p=Math.pow(2,h),h++)}for(o=2,n=0;n<h;n++)m=m<<1|1&o,g==t-1?(g=0,f.push(r(m)),m=0):g++,o>>=1;for(;;){if(m<<=1,g==t-1){f.push(r(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,r,n){var o,s,a,i,u,c,l,p=[],d=4,h=4,f=3,m="",g=[],v={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)p[o]=o;for(a=0,u=Math.pow(2,2),c=1;c!=u;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(i>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(i>0?1:0)*c,c<<=1;l=e(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(i>0?1:0)*c,c<<=1;l=e(a);break;case 2:return""}for(p[3]=l,s=l,g.push(l);;){if(v.index>t)return"";for(a=0,u=Math.pow(2,f),c=1;c!=u;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(i>0?1:0)*c,c<<=1;switch(l=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(i>0?1:0)*c,c<<=1;p[h++]=e(a),l=h-1,d--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(i>0?1:0)*c,c<<=1;p[h++]=e(a),l=h-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,f),f++),p[l])m=p[l];else{if(l!==h)return null;m=s+s.charAt(0)}g.push(m),p[h++]=s+m.charAt(0),s=m,0==--d&&(d=Math.pow(2,f),f++)}}};return s}();function save(){x=LZString.compressToEncodedURIComponent(Array.from(document.querySelectorAll("td")).map((e=>e.dataset?.brush||"0")).join("")),share.value=`${window.location.hostname}/${window.location.pathname}?w=${customWidth}&h=${customHeight}&m=${x}`}function load(){return LZString.decompressFromEncodedURIComponent(urlParams.get("m"))}"function"==typeof define&&define.amd?define((function(){return LZString})):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",(function(){return LZString}));let shift=-1,type=0,canvas=document.querySelector("#canvas");function GenerateCanvas(e,t){for(let r=0;r<t;r++){let t=document.createElement("tr");for(let r=0;r<e;r++){let e=document.createElement("td");t.appendChild(e),e.addEventListener("mouseover",(e=>{1==e.buttons&&Draw(e.target)})),e.addEventListener("mousedown",(e=>{1==e.buttons&&Draw(e.target)}))}canvas.appendChild(t)}}function Draw(e){e.setAttribute("data-brush",type),-1!=shift?(e.style.background='url("spritesheet.png")',e.style.backgroundPosition=`${shift}px 0px`,e.style.backgroundSize="280px 40px"):e.style.background=""}function GenerateBrushes(e){e.forEach(((e,t)=>{let r=document.createElement("div"),n=document.createElement("div");n.setAttribute("data-brush",e[1]),0!=t?(n.style.background='url("spritesheet.png")',n.style.backgroundPosition=-50*(t-1)/2+"px 0px",n.style.backgroundSize="175px 25px"):n.style.background="white",r.appendChild(n);let o=document.createElement("div");o.innerText=e[0],r.appendChild(o),brushesContainer.appendChild(r),n.addEventListener("click",(r=>{shift=r.target.getAttribute("data-brush"),type=t,brush.innerText=e[0]}))}))}const urlParams=new URLSearchParams(window.location.search),customWidth=urlParams.get("w"),customHeight=urlParams.get("h");customWidth&&customHeight?GenerateCanvas(Number(customWidth),Number(customHeight)):GenerateCanvas(8,8);let brushList=[["Terrain",0],["Elevation",1],["Hazard",2],["Objective",3],["Special",4],["Stairs",5],["Wall",6]];if(brushList=[["Empty",-1],...brushList.map((e=>(e[1]*=-40,e)))],GenerateBrushes(brushList),urlParams.get("m")){const e=load();Array.from(document.querySelectorAll("td")).forEach(((t,r)=>{type=e[r],shift=brushList[e[r]][1],Draw(t)}))}
